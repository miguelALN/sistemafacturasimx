<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<!--
    Document   : foliosFiscales.xhtml
    Created on : Dec 2022
    Author     : Raul Estrada
-->
<html xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:p="http://primefaces.org/ui"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns="http://www.w3.org/1999/xhtml">

<h:head>
  <link rel="stylesheet" type="text/css" href="../resources/css/master.css"/>
  <link rel="stylesheet" type="text/css" href="../resources/css/style.css"/>
  <div id="logo"><img src="../resources/img/common/bmxt.jpg" alt=""/><a href="https://www.bancomext.com">
    <img src="../resources/img/header.png" alt=""/></a>
  </div>
</h:head>

<h:body>
  <ui:include src="../menuBar.xhtml"/>
  <div style="text-align: -webkit-center">
    <h:form id="form1">
      <fieldset>
        <legend>Generaci贸n de Folios Fiscales</legend>
        <p:outputPanel layout="block" id="pgInfo">
          <!--p:message for="btnModificar" id="otMsg" style="color:blue; font-size:11px;"/-->
          <p:outputPanel layout="block" scrollHeight="250px">
            <p:dataTable id="dtInfo" var="row"
                         rows="#{foliosFiscales.defaultRows}"
                         binding="#{foliosFiscales.htmlDataTable}"
                         value="#{foliosFiscales.listaTabla}"
                         style="vertical-align:top"
                         paginator="#{foliosFiscales.paginatorVisible}"
                         paginatorPosition="bottom"
                         paginatorTemplate="{CurrentPageReport} {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {RowsPerPageDropdown}"
                         currentPageReportTemplate="{startRecord}-{endRecord} de {totalRecords} registros">

              <p:column headerText="Serie" sortOrder="asc">
                <h:outputText value="#{row.serie}"
                              style="text-align:center;"/>
              </p:column>
              <p:column headerText="Fecha Autorizaci贸n">
                <h:outputText value="#{row.id.fechaAutorizacion}"
                              style="text-align:center;">
                  <f:convertDateTime pattern="dd/MM/yyyy"/>
                </h:outputText>
              </p:column>
              <p:column headerText="No. Autorizaci贸n">
                <h:outputText value="#{row.id.noAutorizacion}"
                              style="text-align:right;"/>
              </p:column>
              <p:column headerText="Folio Inicial">
                <h:outputText value="#{row.primerFolio}"
                              style="text-align:right;"/>
              </p:column>
              <p:column headerText="Folio Final">
                <h:outputText value="#{row.ultimoFolio}"
                              style="text-align:right;"/>
              </p:column>
              <p:column headerText="Utilizados">
                <h:outputText value="#{row.foliosUtilizados}"
                              style="text-align:right;"/>
              </p:column>
              <p:column headerText="Disponibles">
                <h:outputText value="#{row.foliosDiponibles}"
                              style="text-align:right;"/>
              </p:column>
              <p:column headerText="Cancelados">
                <h:outputText value="#{row.foliosDiponibles}"
                              style="text-align:right;"/>
              </p:column>
              <p:column headerText="% Disponibles">
                <h:outputText value="#{row.porcentajeFoliosDisponibles}"
                              style="text-align:right;"/>
              </p:column>
            </p:dataTable>
          </p:outputPanel>
          <p/>
          <h:panelGroup>
            <p:commandButton value="Agregar" action="#{foliosFiscales.muestraPopUpAlta}"/>
          </h:panelGroup>

        </p:outputPanel>

        <br/>
      </fieldset>


      <p:dialog id="ppAlta" modal="true" autoCentre="true"
                title="Formulario Alta" visible="#{foliosFiscales.popUpAlta}">
        <f:facet name="header">
          <p:panelGrid id="pgdHeader" columns="1"
                       style="display: block; height: 24px; position: relative; text-align:right; width: 100%">
            <p:commandButton action="#{foliosFiscales.cancelarPopUpAlta}" id="closePopupBtn"
                             alt="Cerrar" image="../resources/img/cerrar.png"
                             style="position: relative;" value="submit" title="Cerrar"/>
          </p:panelGrid>
        </f:facet>

        <f:facet name="body">
          <h:panelGroup>
            <fieldset style="width:auto">
              <legend>Captura de Informaci贸n</legend>
              <br/>
              <p:message for="guardar" style="color:red; font-size:12px;text-align:justify;"/>

              <p:panelGrid columns="3">
                <h:outputText value="* Serie "/>
                <h:inputText id="serie" maxlength="10" value="#{foliosFiscales.serie}"/>
                <p:message for="serie" style="color:red; font-size:11px;"/>

                <h:outputText value="* Fecha Autorizacion: "/>
                <p:outputLabel id="fechaAutorizacion" onkeypress="return false;"
                               partialSubmit="true"
                               renderAsPopup="true"
                               style="font-size: 10px;"
                               value="#{foliosFiscales.fechaAutorizacion}">
                  <f:convertDateTime dateStyle="short" type="date"/>
                  <f:convertDateTime pattern="dd/MM/yyyy" type="both"/>
                </p:outputLabel>
                <p:message for="fechaAutorizacion" style="color:red; font-size:11px;"/>

                <h:outputText value="* No Autorizacion "/>
                <p:inputNumber id="noAutorizacion" maxValue="999999999999999" thousandSeparator=""
                               decimalPlaces="0"
                               value="#{foliosFiscales.noAutorizacion}"/>
                <p:message for="noAutorizacion" style="color:red; font-size:11px;"/>

                <h:outputText value="* Folio Inicial "/>
                <p:inputNumber id="primerFolio" maxValue="99999999999999999999" thousandSeparator=""
                               decimalPlaces="0"
                               value="#{foliosFiscales.primerFolio}"/>
                <p:message for="primerFolio" style="color:red; font-size:11px;"/>

                <h:outputText value="* Folio Final "/>
                <p:inputNumber id="ultimoFolio" maxValue="99999999999999999999" thousandSeparator=""
                               decimalPlaces="0"
                               value="#{foliosFiscales.ultimoFolio}"/>
                <p:message for="ultimoFolio" style="color:red; font-size:11px;"/>

                <h:outputText value="* Producto "/>
                <h:inputText id="producto" maxlength="15" disabled="true"
                             value="#{foliosFiscales.producto}"/>
                <p:message for="producto" style="color:red; font-size:11px;"/>

                <h:outputText value="* Orden "/>
                <p:inputNumber id="orden" maxValue="99999999" thousandSeparator="" decimalPlaces="0"
                               disabled="true" value="#{foliosFiscales.orden}"/>
                <p:message for="orden" style="color:red; font-size:11px;"/>

              </p:panelGrid>

              <p:panelGrid columns="5">
                <p:commandButton value="Guardar" id="guardar"
                                 action="#{foliosFiscales.guardarNuevoRegistro}"/>
              </p:panelGrid>

              <p:outputPanel layout="block" style="text-align:center;">
                <p/>
                <h:outputText value="Los campos marcados con * son mandatorios"/>
              </p:outputPanel>
            </fieldset>
          </h:panelGroup>
        </f:facet>
      </p:dialog>
    </h:form>
  </div>
</h:body>
</html>
